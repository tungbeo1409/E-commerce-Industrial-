var hexcase=0,b64pad="",chrsz=8;function hex_md5(e){return binl2hex(core_md5(str2binl(e),e.length*chrsz))}function b64_md5(e){return binl2b64(core_md5(str2binl(e),e.length*chrsz))}function str_md5(e){return binl2str(core_md5(str2binl(e),e.length*chrsz))}function hex_hmac_md5(e,i){return binl2hex(core_hmac_md5(e,i))}function b64_hmac_md5(e,i){return binl2b64(core_hmac_md5(e,i))}function str_hmac_md5(e,i){return binl2str(core_hmac_md5(e,i))}function md5_vm_test(){return"900150983cd24fb0d6963f7d28e17f72"==hex_md5("abc")}function core_md5(e,i){e[i>>5]|=128<<i%32,e[14+(i+64>>>9<<4)]=i;for(var o=1732584193,t=-271733879,n=-1732584194,a=271733878,d=0;d<e.length;d+=16){var m=o,r=t,c=n,l=a;t=md5_ii(t=md5_ii(t=md5_ii(t=md5_ii(t=md5_hh(t=md5_hh(t=md5_hh(t=md5_hh(t=md5_gg(t=md5_gg(t=md5_gg(t=md5_gg(t=md5_ff(t=md5_ff(t=md5_ff(t=md5_ff(t,n=md5_ff(n,a=md5_ff(a,o=md5_ff(o,t,n,a,e[d+0],7,-680876936),t,n,e[d+1],12,-389564586),o,t,e[d+2],17,606105819),a,o,e[d+3],22,-1044525330),n=md5_ff(n,a=md5_ff(a,o=md5_ff(o,t,n,a,e[d+4],7,-176418897),t,n,e[d+5],12,1200080426),o,t,e[d+6],17,-1473231341),a,o,e[d+7],22,-45705983),n=md5_ff(n,a=md5_ff(a,o=md5_ff(o,t,n,a,e[d+8],7,1770035416),t,n,e[d+9],12,-1958414417),o,t,e[d+10],17,-42063),a,o,e[d+11],22,-1990404162),n=md5_ff(n,a=md5_ff(a,o=md5_ff(o,t,n,a,e[d+12],7,1804603682),t,n,e[d+13],12,-40341101),o,t,e[d+14],17,-1502002290),a,o,e[d+15],22,1236535329),n=md5_gg(n,a=md5_gg(a,o=md5_gg(o,t,n,a,e[d+1],5,-165796510),t,n,e[d+6],9,-1069501632),o,t,e[d+11],14,643717713),a,o,e[d+0],20,-373897302),n=md5_gg(n,a=md5_gg(a,o=md5_gg(o,t,n,a,e[d+5],5,-701558691),t,n,e[d+10],9,38016083),o,t,e[d+15],14,-660478335),a,o,e[d+4],20,-405537848),n=md5_gg(n,a=md5_gg(a,o=md5_gg(o,t,n,a,e[d+9],5,568446438),t,n,e[d+14],9,-1019803690),o,t,e[d+3],14,-187363961),a,o,e[d+8],20,1163531501),n=md5_gg(n,a=md5_gg(a,o=md5_gg(o,t,n,a,e[d+13],5,-1444681467),t,n,e[d+2],9,-51403784),o,t,e[d+7],14,1735328473),a,o,e[d+12],20,-1926607734),n=md5_hh(n,a=md5_hh(a,o=md5_hh(o,t,n,a,e[d+5],4,-378558),t,n,e[d+8],11,-2022574463),o,t,e[d+11],16,1839030562),a,o,e[d+14],23,-35309556),n=md5_hh(n,a=md5_hh(a,o=md5_hh(o,t,n,a,e[d+1],4,-1530992060),t,n,e[d+4],11,1272893353),o,t,e[d+7],16,-155497632),a,o,e[d+10],23,-1094730640),n=md5_hh(n,a=md5_hh(a,o=md5_hh(o,t,n,a,e[d+13],4,681279174),t,n,e[d+0],11,-358537222),o,t,e[d+3],16,-722521979),a,o,e[d+6],23,76029189),n=md5_hh(n,a=md5_hh(a,o=md5_hh(o,t,n,a,e[d+9],4,-640364487),t,n,e[d+12],11,-421815835),o,t,e[d+15],16,530742520),a,o,e[d+2],23,-995338651),n=md5_ii(n,a=md5_ii(a,o=md5_ii(o,t,n,a,e[d+0],6,-198630844),t,n,e[d+7],10,1126891415),o,t,e[d+14],15,-1416354905),a,o,e[d+5],21,-57434055),n=md5_ii(n,a=md5_ii(a,o=md5_ii(o,t,n,a,e[d+12],6,1700485571),t,n,e[d+3],10,-1894986606),o,t,e[d+10],15,-1051523),a,o,e[d+1],21,-2054922799),n=md5_ii(n,a=md5_ii(a,o=md5_ii(o,t,n,a,e[d+8],6,1873313359),t,n,e[d+15],10,-30611744),o,t,e[d+6],15,-1560198380),a,o,e[d+13],21,1309151649),n=md5_ii(n,a=md5_ii(a,o=md5_ii(o,t,n,a,e[d+4],6,-145523070),t,n,e[d+11],10,-1120210379),o,t,e[d+2],15,718787259),a,o,e[d+9],21,-343485551),o=safe_add(o,m),t=safe_add(t,r),n=safe_add(n,c),a=safe_add(a,l)}return Array(o,t,n,a)}function md5_cmn(e,i,o,t,n,a){return safe_add(bit_rol(safe_add(safe_add(i,e),safe_add(t,a)),n),o)}function md5_ff(e,i,o,t,n,a,d){return md5_cmn(i&o|~i&t,e,i,n,a,d)}function md5_gg(e,i,o,t,n,a,d){return md5_cmn(i&t|o&~t,e,i,n,a,d)}function md5_hh(e,i,o,t,n,a,d){return md5_cmn(i^o^t,e,i,n,a,d)}function md5_ii(e,i,o,t,n,a,d){return md5_cmn(o^(i|~t),e,i,n,a,d)}function core_hmac_md5(e,i){var o=str2binl(e);o.length>16&&(o=core_md5(o,e.length*chrsz));for(var t=Array(16),n=Array(16),a=0;a<16;a++)t[a]=909522486^o[a],n[a]=1549556828^o[a];var d=core_md5(t.concat(str2binl(i)),512+i.length*chrsz);return core_md5(n.concat(d),640)}function safe_add(e,i){var o=(65535&e)+(65535&i);return(e>>16)+(i>>16)+(o>>16)<<16|65535&o}function bit_rol(e,i){return e<<i|e>>>32-i}function str2binl(e){for(var i=Array(),o=(1<<chrsz)-1,t=0;t<e.length*chrsz;t+=chrsz)i[t>>5]|=(e.charCodeAt(t/chrsz)&o)<<t%32;return i}function binl2str(e){for(var i="",o=(1<<chrsz)-1,t=0;t<32*e.length;t+=chrsz)i+=String.fromCharCode(e[t>>5]>>>t%32&o);return i}function binl2hex(e){for(var i=hexcase?"0123456789ABCDEF":"0123456789abcdef",o="",t=0;t<4*e.length;t++)o+=i.charAt(e[t>>2]>>t%4*8+4&15)+i.charAt(e[t>>2]>>t%4*8&15);return o}function binl2b64(e){for(var i="",o=0;o<4*e.length;o+=3)for(var t=(e[o>>2]>>o%4*8&255)<<16|(e[o+1>>2]>>(o+1)%4*8&255)<<8|e[o+2>>2]>>(o+2)%4*8&255,n=0;n<4;n++)8*o+6*n>32*e.length?i+=b64pad:i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t>>6*(3-n)&63);return i}function getQueryString(e){var i=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),o=window.location.search.substr(1).match(i);return null!=o?unescape(o[2]):null}"function"!=typeof loadScriptwebim&&(window.loadScriptwebim=function(e,i,o){var t=document.createElement("script");t.type="text/javascript",t.async=o||!0,t.onload=t.onreadystatechange=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(i&&i(),t.onload=t.onreadystatechange=null)},t.src=e||"/js/jquery.1.12.4.js",document.getElementsByTagName("head")[0].appendChild(t)}),window.loadLink=function(e){var i=document.createElement("link");i.rel="stylesheet",i.href=e||"",document.getElementsByTagName("head")[0].appendChild(i)};var im_appid=10003;if("undefined"==typeof company_type||4!=company_type&&22!=company_type&&24!=company_type&&6!=company_type||(im_appid=10004),void 0===webim_domain)var webim_domain="";var hostname=webim_domain,domainname=webim_domain;domainname.indexOf("//")>-1&&(domainname=domainname.split("//")[1]),hostname&&""!==hostname.trim()||(hostname=window.location.origin,domainname=window.location.hostname);var impath="../litechatV2";colorUrl&&"/test"==colorUrl&&(impath="/litechatV2"),window.webim={jsserver:webim_domain+"/litechatV2",hostname:hostname+"/roomapi",wsPath:"/sslmsgserver",wsURL:"wss://"+domainname+"/sslmsgserver",userInfoURL:hostname+"/roomapi/imapi/get_users_info?sign=",fileServer:webim_domain+"/fileServer/uploadFile",defaultMessage:"Good day, what product are you looking for?",replaceAvatarURL:hostname+"/getavatar.html?avatar=",pathToIM:impath,imapi:webim_domain,appid:im_appid,cid:0,pid:0,loginname:"",chatType:1,seller_id:0,buyer_id:0,prefix:"webim_",src:"trade1",domain:webim_domain,servePlatFrom:"site",showAudio:!0,showVideo:!0,get_prefix:function(e){return cookie_prefix="buyer_id"==e||"login_name"==e?"webim_":"ueid"==e?"":webim.prefix,cookie_prefix},setCookie:function(e,i,o){if(!i)return!1;void 0===o&&(o=168);var t=new Date;t.setTime(t.getTime()+60*o*60*1e3),document.cookie=webim.get_prefix(e)+e+"="+escape(i)+";expires="+t.toGMTString()},getCookie:function(e){var i=document.cookie.match(new RegExp("(^| )"+webim.get_prefix(e)+e+"=([^;]*)(;|$)"));return null!=i?unescape(i[2]):null},start_chat:function(){var e={pid:webim.pid.toString(),cid:webim.cid.toString(),gclid:getLocalCookie("gclid"),adcid:getLocalCookie("adcid"),ads:getLocalCookie("ads"),adgid:getLocalCookie("adgid"),loc:getLocalCookie("loc"),kwd:getLocalCookie("kwd"),tid:getLocalCookie("tid"),src:webim.src},i={hostname:webim.hostname,wsPath:webim.wsPath,wsURL:webim.wsURL,userInfoURL:webim.userInfoURL,fileServer:webim.fileServer,defaultMessage:webim.defaultMessage,replaceAvatarURL:webim.replaceAvatarURL,pathToIM:webim.pathToIM,defaultOpen:!0,appId:webim.appid,loginId:parseInt(webim.buyer_id),loginName:webim.loginname,activeId:parseInt(webim.seller_id),cid:webim.cid,pid:webim.pid,extraInfo:JSON.stringify(removeEmptyEntries(e)),chatType:webim.chatType,chatOrigin:webim.domain,onReady:function(){console.log("logined onReady")}};hideMobileFloat(),window.IM.init(i)},is_logined:function(e){webim.prefix="webim_"+e+"_",webim.loginname=webim.getCookie("login_name"),webim.buyer_id=webim.getCookie("buyer_id"),webim.seller_id=webim.getCookie("seller_id");getQueryString("webim_fields");return webim.loginname&&webim.buyer_id&&webim.seller_id},auto_open_im:function(){watchECERIM_num=0,watchECERIM(webim.run)},regist_buyer:function(){if(webim.getCookie("buyer_id"))return webim.auto_open_im(),!0;var e=webim.getCookie("ueid");e||(e=hex_md5(Date.now().toString()),webim.setCookie("ueid",e,2184)),webim.loginname=e+"#buyer";var i=hex_md5("f2ea43ef1e6f67f2d1c23f4a7f2317d8"+webim.loginname),o={User_Name:webim.loginname,App_ID:webim.appid,Cid:webim.cid,Pid:webim.pid};if(10004==webim.appid){var t=webim_domain+"/index.php?r=inquiry/getbuyer";"undefined"!=typeof colorUrl&&"/test"==colorUrl&&g_tp&&(t=g_tp+t),$.ajax({type:"post",url:t,data:{name:webim.loginname,nick:e,appid:webim.appid,email:""},async:!1,dataType:"json",success:function(e){1==e.result?(o.Identifier=e.data.imid,i=hex_md5("f2ea43ef1e6f67f2d1c23f4a7f2317d8"+e.data.imid+webim.loginname)):alert(e.msg)}})}$.ajax({type:"post",url:webim.imapi+"/account_import?sign="+i,data:JSON.stringify(o),async:!1,success:function(e){var i=JSON.parse(e);if(0==i.error_code){webim.buyer_id=i.user_id,webim.seller_id=i.kefu_id,webim.setCookie("login_name",webim.loginname,2184),webim.setCookie("buyer_id",webim.buyer_id,2184),webim.setCookie("seller_id",webim.seller_id,2184);var o={pid:webim.pid.toString(),cid:webim.cid.toString(),gclid:getLocalCookie("gclid"),adcid:getLocalCookie("adcid"),ads:getLocalCookie("ads"),adgid:getLocalCookie("adgid"),loc:getLocalCookie("loc"),kwd:getLocalCookie("kwd"),tid:getLocalCookie("tid"),src:webim.src};im_config={hostname:webim.hostname,wsPath:webim.wsPath,wsURL:webim.wsURL,userInfoURL:webim.userInfoURL,fileServer:webim.fileServer,defaultMessage:webim.defaultMessage,replaceAvatarURL:webim.replaceAvatarURL,pathToIM:webim.pathToIM,appId:webim.appid,loginId:parseInt(webim.buyer_id),loginName:webim.loginname,activeId:parseInt(webim.seller_id),cid:webim.cid,pid:webim.pid,extraInfo:JSON.stringify(removeEmptyEntries(o)),chatOrigin:webim.domain,servePlatFrom:webim.servePlatFrom,onReady:function(){console.log("onReady")}},window.IM.init(im_config),webim.auto_open_im()}else alert(i.error_msg)}})},preload:function(e=0){loadIm||(loadIm=!0,window.IM||loadScriptwebim(webim.jsserver+"/imlite.v1.js",function(){if(loadLink(webim.jsserver+"/assets/imlite.v1.css"),$("#floatAd").length>0&&$("#floatAd").hide(),"undefined"!=typeof cta_cid&&cta_cid){webim.cid=cta_cid,"0"==webim.pid&&"undefined"!=typeof cta_pid&&cta_pid&&(webim.pid=cta_pid),"0"==webim.pid&&"undefined"!=typeof use_defaulProductInfo&&1==use_defaulProductInfo&&"undefined"!=typeof defaulProductInfo&&defaulProductInfo.pid&&(webim.pid=defaulProductInfo.pid);var i={pid:webim.pid.toString(),cid:webim.cid.toString(),gclid:getLocalCookie("gclid"),adcid:getLocalCookie("adcid"),ads:getLocalCookie("ads"),adgid:getLocalCookie("adgid"),loc:getLocalCookie("loc"),kwd:getLocalCookie("kwd"),tid:getLocalCookie("tid"),src:webim.src};webim.pid=parseInt(webim.pid),webim.is_logined(cta_cid)?(im_config={hostname:webim.hostname,wsPath:webim.wsPath,wsURL:webim.wsURL,userInfoURL:webim.userInfoURL,fileServer:webim.fileServer,extraInfo:JSON.stringify(removeEmptyEntries(i)),defaultMessage:webim.defaultMessage,replaceAvatarURL:webim.replaceAvatarURL,pathToIM:webim.pathToIM,appId:webim.appid,loginId:parseInt(webim.buyer_id),loginName:webim.loginname,activeId:parseInt(webim.seller_id),cid:webim.cid,pid:webim.pid,chatOrigin:webim.domain},0==e&&(im_config.defaultOpen=!0),window.IM.init(im_config)):webim.regist_buyer()}}))},init:function(){webim.preload()},run:function(){if("0"==webim.pid&&"undefined"!=typeof cta_pid&&cta_pid&&(webim.pid=cta_pid),"0"==webim.pid&&"undefined"!=typeof use_defaulProductInfo&&1==use_defaulProductInfo&&"undefined"!=typeof defaulProductInfo&&defaulProductInfo.pid&&(webim.pid=defaulProductInfo.pid),webim.pid=parseInt(webim.pid),webim.is_logined(webim.cid))console.log("---logined---"),webim.start_chat();else{webim.pid.toString(),webim.cid.toString(),getLocalCookie("gclid"),getLocalCookie("adcid"),getLocalCookie("ads"),getLocalCookie("adgid"),getLocalCookie("loc"),getLocalCookie("kwd"),getLocalCookie("tid"),webim.src;var e=webim.getCookie("ueid");e||(e=hex_md5(Date.now().toString()),webim.setCookie("ueid",e,2184)),webim.loginname=e+"#buyer";var i=hex_md5("f2ea43ef1e6f67f2d1c23f4a7f2317d8"+webim.loginname),o={User_Name:webim.loginname,App_ID:webim.appid,Cid:webim.cid,Pid:webim.pid};if(10004==webim.appid){var t=webim_domain+"/index.php?r=inquiry/getbuyer";"undefined"!=typeof colorUrl&&"/test"==colorUrl&&g_tp&&(t=g_tp+t),$.ajax({type:"post",url:t,data:{name:webim.loginname,nick:e,appid:webim.appid,email:""},async:!1,dataType:"json",success:function(e){1==e.result?(o.Identifier=e.data.imid,i=hex_md5("f2ea43ef1e6f67f2d1c23f4a7f2317d8"+e.data.imid+webim.loginname)):alert(e.msg)}})}$.ajax({type:"post",url:webim.imapi+"/account_import?sign="+i,data:JSON.stringify(o),async:!1,success:function(e){var i=JSON.parse(e);0==i.error_code?(webim.buyer_id=i.user_id,webim.seller_id=i.kefu_id,webim.setCookie("login_name",webim.loginname,2184),webim.setCookie("buyer_id",webim.buyer_id,2184),webim.setCookie("seller_id",webim.seller_id,2184),im_config={hostname:webim.hostname,wsPath:webim.wsPath,wsURL:webim.wsURL,userInfoURL:webim.userInfoURL,fileServer:webim.fileServer,defaultMessage:webim.defaultMessage,replaceAvatarURL:webim.replaceAvatarURL,pathToIM:webim.pathToIM,appId:webim.appid,loginId:parseInt(webim.buyer_id),loginName:webim.loginname,activeId:parseInt(webim.seller_id),cid:webim.cid,pid:webim.pid,chatOrigin:webim.domain,servePlatFrom:webim.servePlatFrom,onReady:function(){console.log("onReady")}},hideMobileFloat(),window.IM.init(im_config)):alert(i.error_msg)}})}}};var loadIm=!1,watchECERIM_dex=200,watchECERIM_num=0;function watchECERIM(e){watchECERIM_num>watchECERIM_dex&&(clearInterval(i),i=null);var i=setInterval(function(){console.log(watchECERIM_num),watchECERIM_num++,"object"==typeof window.IM&&"function"==typeof jQuery?"function"==typeof window.IM.init&&(clearInterval(i),i=null,e&&e()):(webim.init(),clearInterval(i),i=null)},50)}function watch(){window.RunOnce=!1,addEvent()}function addEvent(){window.addEventListener("scroll",handler),document.addEventListener("touchstart",handler)}function removeEvent(){window.removeEventListener("scroll",handler),window.removeEventListener("touchstart",handler)}function handler(e){if("A"===e.target.tagName);else{var i=e.type;if(Object.keys(collections).length>0)for(var o in collections)"function"==typeof collections[o]&&collections[o]&&collections[o](i);else removeEvent()}}function hideMobileFloat(){$("#popup_float").length>0&&$("#popup_float").hide(),isMobileDevice()&&$("#floatAd").length>0&&$("#floatAd").hide()}function isMobileDevice(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function removeEmptyEntries(e){return Object.entries(e).reduce((e,[i,o])=>(null!=o&&""!==o&&(e[i]=o),e),{})}function getLocalCookie(e){var i=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=i?unescape(i[2]):null}window.collections={},"undefined"!=typeof cta_cid&&cta_cid&&webim.is_logined(cta_cid)?setTimeout(function(){console.log("---webim init---"),webim.preload(1)},100):(console.log("---watch user action---"),collections.fn_webim_init=function(e){setTimeout(function(){webim.init(),delete collections.fn_webim_init},100)}),2!=isShowGuide&&2!=showGuideColor&&1!=isShowGuide||watch();